<!DOCTYPE html>

<head>
    <title>MMU Bulletin</title>
    <link rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" type="image/png" href="favicon.ico"/>
    <link rel="icon" sizes="192x192" href="launcher-icon-4x.png">
    <meta property="og:image" content="https://limhenry.me/bulletin/launcher-icon-4x.png" />
    <meta property="og:title" content="MMU Bulletin" />
    <meta property="og:description" content="MMU Bulletin Board with Material Design. Created, Developed and Designed by Henry Lim." />


</head>

<body>
    <div class="navbar-fixed">
        <nav>
            <a href="#" class="brand-logo">MMU Bulletin</a>
            <ul class="right hide-on-med-and-down">
                <li><a href="https://cms.mmu.edu.my/psp/csprd/?cmd=login&languageCd=ENG&">CamSys</a></li>
                <li><a href="//mmls.mmu.edu.my">MMLS</a></li>
                <li><a id="reload">limhenry.me</a></li>
            </ul>
            <ul id="slide-out" class="side-nav">
                <div id="nav-banner">
                    <p>MMU Bulletin</p>
                </div>
                <li><a href="https://cms.mmu.edu.my/psp/csprd/?cmd=login&languageCd=ENG&">CamSys</a></li>
                <li><a href="//mmls.mmu.edu.my">MMLS</a></li>
                <li><a id="reload">limhenry.me</a></li>
            </ul>
            <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a>
        </nav>
    </div>

    <ul class="collapsible" data-collapsible="accordion" id="links">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Responsive -->
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3866326270033666" data-ad-slot="2594658120" data-ad-format="auto"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </ul>

    <footer class="page-footer">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h4 class="white-text">MMU Bulletin</h4>
                    <p class="grey-text text-lighten-4">MMU Bulletin Board with Material Design.
                        <br>Created, Developed and Designed by Henry Lim.</p>
                </div>
                <div class="col l4 offset-l2 s12">
                    <h5 class="white-text">limhenry</h5>
                    <ul>
                        <li><a class="grey-text text-lighten-3" href="//limhenry.me">limhenry.me</a></li>
                        <li><a class="grey-text text-lighten-3" href="//blog.limhenry.me">Blog</a></li>
                        <li><a class="grey-text text-lighten-3" href="//github.com/limhenry">GitHub</a></li>
                        <li><a class="grey-text text-lighten-3" href="//plus.google.com/+HenryLim96">Google Plus</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                Â© 2015 Henry Lim
            </div>
        </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="js/materialize.min.js"></script>
    <script>
        var i = 0;
        var getJSON = function(url) {
            return new Promise(function(resolve, reject) {
                var xhr = new XMLHttpRequest();
                xhr.open('get', url, true);
                xhr.responseType = 'json';
                xhr.onload = function() {
                    var status = xhr.status;
                    if (status == 200) {
                        resolve(xhr.response);
                    } else {
                        reject(status);
                    }
                };
                xhr.send();
            });
        };

        getJSON('//mmu-api.appspot.com/response').then(function(data) {

                while (i < data.length) {
                    var div = document.createElement("div");
                    var div2 = document.createElement("div");
                    var li = document.createElement("li");
                    var p = document.createElement("p");
                    var p2 = document.createElement("p");
                    var icon = document.createElement("i");
                    icon.setAttribute("class", "mdi-editor-attach-file tooltipped");
                    icon.setAttribute("data-position", "left");
                    icon.setAttribute("data-delay", "50");
                    icon.setAttribute("data-tooltip", "Attachment available");
                    li.setAttribute("id", i);
                    var title = document.createTextNode(data[i].title.toUpperCase() + " - " + data[i].posted_date);

                    if (data[i].content.length > 0) {
                        var contents = document.createTextNode(data[i].content);
                        div2.appendChild(p);
                        var s = data[i].images;
                        s = s.replace("bulletinfile", "https://online.mmu.edu.my/bulletinfile");
                        p.innerHTML = s;
                        if (data[i].attachment !== "") {
                            var s2 = "Attachment: <br>" + data[i].attachment + "<br>";
                            p2.innerHTML = s2;
                            div2.appendChild(p2);
                            div.appendChild(icon);
                        }
                    } else {
                        var contents = document.createTextNode("Move along, nothing to see here");
                    }

                    div.appendChild(title);
                    p.appendChild(contents);

                    div.setAttribute("class", "collapsible-header");
                    div.setAttribute("id", data[i].posted_ID);
                    div2.setAttribute("class", "collapsible-body");
                    document.getElementById("links").appendChild(li);
                    document.getElementById(i).appendChild(div);
                    document.getElementById(i).appendChild(div2);
                    p = document.getElementById(i).children[1].children[0]
                    p.innerHTML = p.innerHTML.replace(/\n\n/g, "<br>")
                        /**console.log("done")**/
                    i++;
                }
                hash();
                run();

            }

        );

        function run() {
            $('.tooltipped').tooltip({delay: 50});
            function GetCookie(name) {
                var arg = name + "=";
                var alen = arg.length;
                var clen = document.cookie.length;
                var i = 0;
                while (i < clen) {
                    var j = i + alen;
                    if (document.cookie.substring(i, j) == arg)
                        return "here";
                    i = document.cookie.indexOf(" ", i) + 1;
                    if (i == 0) break;
                }
                return null;
            }
            var visit = GetCookie("COOKIE1");
            if (visit == null) {
                var expire = new Date();
                window.name = "thiswin";
                Materialize.toast('WARNING: This is an experimental build.', 5000); //
                Materialize.toast('By browsing our site you agree to our use of cookies.', 10000); //
                expire = new Date(expire.getTime() + 7776000000);
                document.cookie = "COOKIE1=here; expires=" + expire;
            }
            else{
                Materialize.toast('Yeah! Welcome back :)', 5000); //
            }
             
            $('.collapsible').collapsible({
                accordion: false // A setting that changes the collapsible behavior to expandable instead of the default accordion style
            });


        }
    </script>
    <script>
        $(".button-collapse").sideNav();
    </script>
    <script>
        function hash() {
            hash = location.hash;
            try {
                hash = hash.replace("#", "");
                apple = document.getElementById(hash);
                apple.setAttribute("class", "collapsible-header active");
                apple.scrollIntoView({
                    block: "start",
                    behavior: "smooth"
                });
            } catch (e) {
                /**console.log("why u jiang bad de")**/
            }

        }
    </script>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-57741199-1', 'auto');
        ga('send', 'pageview');
    </script>
    <SCRIPT LANGUAGE="JavaScript">
        <!-- Script courtesy of http://www.web-source.net - Your Guide to Professional Web Site Design and Development

        // -->
    </SCRIPT>
</body>

</html>
